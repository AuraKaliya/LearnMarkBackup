### 软件架构概述

软件架构是从需求分析到软件设计之间的过渡过程。

好的架构需要使每个关注点相互分离，系统中的某一部分的变化不会影响其它的部分。

根据粒度不同，将软件单元划分为类、模块、子系统、系统、集成系统。

#### 框架

框架是软件，架构不是软件。框架是系统或子系统的半成品。为尽早验证架构设计，或处于支持产品线开发目的，将通用机制甚至整个架构以框架的方式实现。

Spring框架：

控制反转：将控制权从应用程序转移给外部容器，开发者不需要直接管理对象的生命周期，而是通过配置文件和注解等定义依赖关系。

依赖注入：是通过外部容器来注入对象的依赖关系。

#### 架构视图

软件架构为用户设计，需要考虑用户要求的**功能**和**质量**。

软件架构为客户设计，需要考虑客户的**业务目标**、成本、**领域规则**和限制。

软件架构为开发人员设计，需要考虑可扩展性、可重用性、可移植性、易理解性、易测试性等**非功能需求**。

软件架构为管理人员设计，需要考虑各解决方案的粗粒度。

* 架构设计的五视图法

    逻辑架构

    关注用户可见的功能，和实现这些功能所必须提供的辅助功能模块。

    系统应当向用户提供什么样的服务。

    数据架构

    关注持久化数据存储的方案，包括数据存储格式、传递、复制、暂存等。

    UML类图、ER图、数据流图

    物理架构

    如何部署。

    部署图、组件图

    运行架构

    关注线程、进程、对象运行的概念，以及相关并发、同步、通信等问题。

    运行时单元的交互，编译时类的静态依赖。

    序列图、协作图、类图、对象图等。

    开发架构

    关注程序包，包括源程序、第三方SDK、现成框架、类库、中间件等。

    开发架构和逻辑架构之间存在映射关系。

    开发期的质量。

    UML图、类图、组件图。

* 

#### 基本架构风格

* 数据流风格：流式处理、线性处理，数据是以整体的方式完整传递至每个处理构件中。

    批处理序列、管道-过滤器

    

* 调用/返回风格：构件之间存在相互调用关系，一般为显式调用。

    主程序/子程序、面向对象调用、层次结构（通过交互协议来定义构件的关系）

    层层抽象，问题逐级分解；系统层次划分要求。

* 独立构件风格：每个构件之间不存在显式的调用关系，而是通过异步方式来触发。

    进程通信、事件驱动

    便利软件复用和维护；构件放弃了对系统计算的控制。

* 虚拟机风格

* 仓库风格

* 有限状态机风格

* C2风格

### 概念性架构设计

#### 鲁棒性分析

从功能需求到设计方案过度，明确功能所需的主要对象以及职责。

仅关注功能需求，由需求导出设计。

用例面向问题领域，设计面向计算机领域；用例本身不面向对象，设计应当面向对象；用例用自然语言描述，设计用形式语言描述。





#### 引入架构模式

引入架构风格，明确关键的设计元素和交互方式。

#### 质量属性分析



### 软件架构文档

#### Copilot

软件架构设计文档通常是开发过程中非常重要的一部分，它帮助团队了解系统的结构、设计决策和预期功能。以下是一些关键内容，通常会包括在软件架构设计文档中：

1. **引言**：简要介绍项目的背景、目标和范围。
2. **架构概述**：整体架构的高层描述，通常包括系统的主要组件及其关系。
3. **设计原则**：设计时遵循的主要原则和指导方针，比如模块化设计、安全性、性能等。
4. **架构视图**：
    * **逻辑视图**：描述系统的主要功能模块及其关系。
    * **开发视图**：展示软件的模块结构，通常对应于代码结构。
    * **物理视图**：描述系统的物理部署，包括服务器、网络等。
    * **过程视图**：展示运行时系统组件之间的动态交互。
5. **系统组件**：详细描述每个主要组件的功能、接口和交互。
6. **模块设计**：详细描述各个模块的设计，包括数据模型、算法、接口等。
7. **数据流图**：展示数据在系统中的流动，帮助理解系统的处理流程。
8. **非功能性需求**：描述系统性能、安全性、可用性等方面的需求。
9. **技术选型**：详细列出系统使用的主要技术、工具和框架，并解释选择它们的理由。
10. **设计决策**：记录架构设计过程中做出的关键决策及其理由。
11. **部署视图**：系统的部署方案和环境需求。
12. **约束与限制**：说明系统在设计和实现过程中必须遵守的限制条件。
13. **测试策略**：概要描述系统的测试策略和计划。
14. **维护和扩展**：描述系统的维护计划和未来扩展的可能性。

### 参考书籍

《Documenting Software Architectures: Views and Beyond, Second Edition》



